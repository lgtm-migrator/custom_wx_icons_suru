language: python
dist: xenial
cache: pip
python:
  - '3.6'
  - '3.7'
  - '3.8'

install:

  - pip install pip lxml scour dummy_wx --upgrade
  - pip install -r requirements.txt
  - pip install tox tox-travis


script:
  - tox


stages:
  - test
  - deploy_pypi

jobs:
  include:
    - stage: deploy_pypi
      python: "3.6"
      script:
        - tox -e icons,build
      deploy:
        on:
          tags: true
          repo: domdfcoding/custom_wx_icons_suru
        provider: pypi
        user: "DomDF"
        password:
          secure: "gOwyfiBEaHp3hfP7y71PLsuzolxafoc0ARLOY42vDbHd6T6L4RZjr3w+YCjblLOjWNpQyUE4xeMa96Pj0D9gywZpIcN2vkyswU2xdIx29gMKo7fc+xQlGwL3WLg3YjQVZbQeYceiD/nWjnKASMeG/4390bqLYx/Xx0Tv7bMP3g3UJJ6qPjIw0bAsUYG2R+lkjj76JiQ2/K9lboEaEc6OYo3dtx5iA2Cn//dBSOkm/uoqtm6y5WfmgninFjb97Q73Oi4MIkLN/eEXfKRZPEUswcwtdf5uuegtT6uBxlxo1fPckYW6cID3VRW70Ced+pI+71qkYqdBkyLz8FeDWhYB4aEk4TlAmzpM6akakhvIzKQvom3N5Ov/+pHHTTvRvDJL42iofrq223nnlJ6T6olrPjYEj5cUt8CJlOotTK2ri2TClErAgY+lwxkS1RrWbPJw6b2FvUNb4sBar/6a7tVNiX/AR0wNOEtNrO3d/r4zdCtzpTYyZF42W42nIvDpXuI24Xq5yDh4Jp36V8dXvAoD1kkbcOgpfvruWwe8W/gSB2fOI9C7BxSwHlyMvU78NutgJgVItm8/9DlwgoevknwMiwpHP6ZzAGiUK51yCMWEiU4gT0zMyNg1LgcnTcv4BEfMiHt23hBlevFu4+Au3II6SccnS7Hap3xE3wHke5Dqya8="
        distributions: "sdist bdist_wheel"
        skip_existing: true
